<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Seascape Analytics Dashboard</title>
  
  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500;600;700&family=Fira+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  
  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  
  <!-- Styles -->
  <link rel="stylesheet" href="css/dashboard.css">
</head>
<body>
  <!-- API Status Banner -->
  <div id="apiStatusBanner" class="api-status-banner">
    <span class="api-status-icon">⚙️</span>
    <span>Using sample data. <a href="#" id="openConfigHelp">Configure API credentials</a> for live data.</span>
  </div>
  <!-- Header -->
  <header class="header">
    <div class="header-left">
      <svg class="logo-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"/>
        <circle cx="12" cy="12" r="3"/>
      </svg>
      <h1>Seascape Analytics</h1>
    </div>
    <div class="header-right">
      <span class="last-updated" id="lastUpdated">Last updated: --</span>
      <button class="btn-refresh" id="refreshBtn" title="Refresh Data">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8"/>
          <path d="M21 3v5h-5"/>
        </svg>
      </button>
    </div>
  </header>

  <!-- Main Content -->
  <main class="main">
    <!-- Date Range Selector -->
    <div class="date-controls">
      <button class="date-btn active" data-range="7">7 Days</button>
      <button class="date-btn" data-range="28">28 Days</button>
      <button class="date-btn" data-range="90">90 Days</button>
    </div>

    <!-- Platform Sections -->
    <div class="platform-grid">
      <!-- Google Analytics Section -->
      <section class="platform-section">
        <div class="section-header">
          <div class="section-title">
            <svg class="section-icon ga-icon" viewBox="0 0 24 24" fill="currentColor">
              <path d="M22.84 2.998c-.766-.766-2.598-.707-3.36.055l-7.893 7.893a1.5 1.5 0 0 0-.32.486l-.93 2.337a.6.6 0 0 0 .782.78l2.337-.93a1.5 1.5 0 0 0 .486-.32l7.893-7.893c.762-.762.766-2.543 0-3.308l-.995-.995v-.002-.003Z"/>
              <path d="M4.5 3A1.5 1.5 0 0 0 3 4.5v15A1.5 1.5 0 0 0 4.5 21h15a1.5 1.5 0 0 0 1.5-1.5v-6a1.5 1.5 0 0 0-3 0v4.5h-12v-12H12a1.5 1.5 0 0 0 0-3H4.5Z"/>
            </svg>
            <h2>Google Analytics</h2>
          </div>
          <a href="https://analytics.google.com" target="_blank" class="btn-external">
            Open GA4
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/>
              <polyline points="15,3 21,3 21,9"/>
              <line x1="10" y1="14" x2="21" y2="3"/>
            </svg>
          </a>
        </div>
        
        <!-- GA Metrics -->
        <div class="metrics-grid">
          <div class="metric-card">
            <span class="metric-label">Total Visitors</span>
            <span class="metric-value" id="gaVisitors">--</span>
            <span class="metric-change positive" id="gaVisitorsChange">--</span>
          </div>
          <div class="metric-card">
            <span class="metric-label">Page Views</span>
            <span class="metric-value" id="gaPageViews">--</span>
            <span class="metric-change positive" id="gaPageViewsChange">--</span>
          </div>
          <div class="metric-card">
            <span class="metric-label">Avg. Session</span>
            <span class="metric-value" id="gaAvgSession">--</span>
            <span class="metric-change" id="gaAvgSessionChange">--</span>
          </div>
          <div class="metric-card">
            <span class="metric-label">Bounce Rate</span>
            <span class="metric-value" id="gaBounceRate">--</span>
            <span class="metric-change negative" id="gaBounceRateChange">--</span>
          </div>
        </div>

        <!-- GA Chart -->
        <div class="chart-container">
          <h3>Traffic Trend</h3>
          <canvas id="gaTrafficChart"></canvas>
        </div>
      </section>

      <!-- Meta Pixel Section -->
      <section class="platform-section">
        <div class="section-header">
          <div class="section-title">
            <svg class="section-icon meta-icon" viewBox="0 0 24 24" fill="currentColor">
              <path d="M12 2.04c-5.5 0-10 4.49-10 10.02 0 5 3.66 9.15 8.44 9.9v-7H7.9v-2.9h2.54V9.85c0-2.51 1.49-3.89 3.78-3.89 1.09 0 2.23.19 2.23.19v2.47h-1.26c-1.24 0-1.63.77-1.63 1.56v1.88h2.78l-.45 2.9h-2.33v7a10 10 0 0 0 8.44-9.9c0-5.53-4.5-10.02-10-10.02Z"/>
            </svg>
            <h2>Meta Pixel</h2>
          </div>
          <a href="https://business.facebook.com/events_manager2" target="_blank" class="btn-external">
            Open Events Manager
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/>
              <polyline points="15,3 21,3 21,9"/>
              <line x1="10" y1="14" x2="21" y2="3"/>
            </svg>
          </a>
        </div>

        <!-- Meta Metrics -->
        <div class="metrics-grid">
          <div class="metric-card">
            <span class="metric-label">Pixel Events</span>
            <span class="metric-value" id="metaEvents">--</span>
            <span class="metric-change positive" id="metaEventsChange">--</span>
          </div>
          <div class="metric-card">
            <span class="metric-label">Page Views</span>
            <span class="metric-value" id="metaPageViews">--</span>
            <span class="metric-change positive" id="metaPageViewsChange">--</span>
          </div>
          <div class="metric-card">
            <span class="metric-label">Leads</span>
            <span class="metric-value" id="metaLeads">--</span>
            <span class="metric-change positive" id="metaLeadsChange">--</span>
          </div>
          <div class="metric-card">
            <span class="metric-label">Match Quality</span>
            <span class="metric-value" id="metaMatchQuality">--</span>
            <span class="metric-change" id="metaMatchQualityChange">--</span>
          </div>
        </div>

        <!-- Meta Chart -->
        <div class="chart-container">
          <h3>Event Activity</h3>
          <canvas id="metaEventsChart"></canvas>
        </div>
      </section>
    </div>

    <!-- Property Performance Section -->
    <section class="property-section">
      <div class="section-header">
        <div class="section-title">
          <svg class="section-icon property-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
            <polyline points="9,22 9,12 15,12 15,22"/>
          </svg>
          <h2>Property Performance</h2>
        </div>
      </div>

      <div class="property-grid" id="propertyGrid">
        <!-- Property cards will be dynamically inserted -->
      </div>
    </section>

    <!-- Revenue & Conversion Section -->
    <section class="revenue-section">
      <div class="section-header">
        <div class="section-title">
          <svg class="section-icon revenue-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="12" y1="1" x2="12" y2="23"/>
            <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>
          </svg>
          <h2>Revenue & Conversions</h2>
        </div>
      </div>

      <div class="metrics-grid metrics-grid-3">
        <div class="metric-card metric-card-large">
          <span class="metric-label">Estimated Revenue</span>
          <span class="metric-value large" id="totalRevenue">$--</span>
          <span class="metric-change positive" id="revenueChange">--</span>
        </div>
        <div class="metric-card metric-card-large">
          <span class="metric-label">Booking Inquiries</span>
          <span class="metric-value large" id="bookingInquiries">--</span>
          <span class="metric-change positive" id="inquiriesChange">--</span>
        </div>
        <div class="metric-card metric-card-large">
          <span class="metric-label">Conversion Rate</span>
          <span class="metric-value large" id="conversionRate">--%</span>
          <span class="metric-change" id="conversionChange">--</span>
        </div>
      </div>

      <!-- Conversion Funnel -->
      <div class="chart-container funnel-container">
        <h3>Conversion Funnel</h3>
        <div class="funnel" id="conversionFunnel">
          <div class="funnel-step" style="--width: 100%">
            <span class="funnel-label">Visitors</span>
            <span class="funnel-value" id="funnelVisitors">--</span>
          </div>
          <div class="funnel-step" style="--width: 60%">
            <span class="funnel-label">Property Views</span>
            <span class="funnel-value" id="funnelPropertyViews">--</span>
          </div>
          <div class="funnel-step" style="--width: 25%">
            <span class="funnel-label">Inquiries</span>
            <span class="funnel-value" id="funnelInquiries">--</span>
          </div>
          <div class="funnel-step" style="--width: 10%">
            <span class="funnel-label">Bookings</span>
            <span class="funnel-value" id="funnelBookings">--</span>
          </div>
        </div>
      </div>
    </section>

    <!-- Traffic Sources -->
    <section class="sources-section">
      <div class="section-header">
        <div class="section-title">
          <svg class="section-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"/>
            <line x1="2" y1="12" x2="22" y2="12"/>
            <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/>
          </svg>
          <h2>Traffic Sources</h2>
        </div>
      </div>

      <div class="sources-grid">
        <div class="chart-container">
          <canvas id="sourcesChart"></canvas>
        </div>
        <div class="sources-list" id="sourcesList">
          <!-- Source items will be dynamically inserted -->
        </div>
      </div>
    </section>
  </main>

  <!-- Footer -->
  <footer class="footer">
    <p>Seascape Vacations Analytics Dashboard</p>
    <div class="footer-links">
      <a href="https://seascape-vacations.com" target="_blank">Website</a>
      <a href="https://analytics.google.com" target="_blank">Google Analytics</a>
      <a href="https://business.facebook.com/events_manager2" target="_blank">Meta Events Manager</a>
    </div>
  </footer>

  <!-- Data Configuration Modal -->
  <div class="modal" id="configModal">
    <div class="modal-content">
      <div class="modal-header">
        <h3>Update Dashboard Data</h3>
        <button class="modal-close" id="closeModal">&times;</button>
      </div>
      <div class="modal-body">
        <p>Enter your latest metrics to update the dashboard:</p>
        <form id="dataForm">
          <div class="form-section">
            <h4>Google Analytics</h4>
            <div class="form-grid">
              <div class="form-group">
                <label for="inputGaVisitors">Total Visitors</label>
                <input type="number" id="inputGaVisitors" placeholder="e.g., 1,234">
              </div>
              <div class="form-group">
                <label for="inputGaPageViews">Page Views</label>
                <input type="number" id="inputGaPageViews" placeholder="e.g., 5,678">
              </div>
              <div class="form-group">
                <label for="inputGaAvgSession">Avg. Session (min:sec)</label>
                <input type="text" id="inputGaAvgSession" placeholder="e.g., 2:45">
              </div>
              <div class="form-group">
                <label for="inputGaBounceRate">Bounce Rate (%)</label>
                <input type="number" id="inputGaBounceRate" placeholder="e.g., 45" step="0.1">
              </div>
            </div>
          </div>
          <div class="form-section">
            <h4>Meta Pixel</h4>
            <div class="form-grid">
              <div class="form-group">
                <label for="inputMetaEvents">Pixel Events</label>
                <input type="number" id="inputMetaEvents" placeholder="e.g., 156">
              </div>
              <div class="form-group">
                <label for="inputMetaLeads">Leads</label>
                <input type="number" id="inputMetaLeads" placeholder="e.g., 12">
              </div>
            </div>
          </div>
          <div class="form-section">
            <h4>Revenue & Bookings</h4>
            <div class="form-grid">
              <div class="form-group">
                <label for="inputRevenue">Estimated Revenue ($)</label>
                <input type="number" id="inputRevenue" placeholder="e.g., 15000">
              </div>
              <div class="form-group">
                <label for="inputInquiries">Booking Inquiries</label>
                <input type="number" id="inputInquiries" placeholder="e.g., 24">
              </div>
            </div>
          </div>
          <button type="submit" class="btn-save">Save & Update Dashboard</button>
        </form>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script src="js/dashboard.js"></script>
</body>
</html>
